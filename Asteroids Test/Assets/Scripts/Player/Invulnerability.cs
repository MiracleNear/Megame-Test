using System.Collections;
using DefaultNamespace.Tween;
using UnityEngine;

[RequireComponent(typeof(SpriteRenderer))]
public class Invulnerability : MonoBehaviour
{
    public bool IsActivated { get; private set; }
    
    [SerializeField] private int _durationInSecond;

    private int _frequency = 2;
    private SpriteRenderer _spriteRenderer;

    private void Awake()
    {
        _spriteRenderer = GetComponent<SpriteRenderer>();
    }

    public void Activate()
    {
        StartCoroutine(MaintainInvulnerabilityFor(_durationInSecond));
    }

    private IEnumerator MaintainInvulnerabilityFor(int second)
    {
        float time = 0f;
        
        IsActivated = true;
        
        while (time <= second)
        {
            _spriteRenderer.color = _spriteRenderer.BlinkAlpha(_frequency, time);
            
            time += Time.deltaTime;

            yield return null;
        }

        IsActivated = false;
    }
    
}